define(["jquery","jqueryui"],function(a,b){return{initialise:function(b){a(".widget-user-2 .btn-block").click(function(b){b.preventDefault(),a(this).find(".fa-refresh").show();var c=a(this).attr("data-action"),d=a(this).attr("data-id");a.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/remui/rest.php?action=set_contact&type="+c+"&otheruserid="+d,success:function(b){a(".widget-user-2 .btn-block .fa-refresh").hide(),b?"add"===c?(a('.widget-user-2 .btn-block[data-action="add"]').removeClass("btn-primary"),a('.widget-user-2 .btn-block[data-action="add"]').addClass("btn-warning"),a('.widget-user-2 .btn-block[data-action="add"]').text(M.util.get_string("removefromcontacts","theme_remui")),a('.widget-user-2 .btn-block[data-action="add"]').css("font-weight","Bold"),a('.widget-user-2 .btn-block[data-action="add"]').attr("data-action","remove"),a('.widget-user-2 .btn-block[data-action="unblock"]').removeClass("btn-success"),a('.widget-user-2 .btn-block[data-action="unblock"]').addClass("btn-danger"),a('.widget-user-2 .btn-block[data-action="unblock"]').text(M.util.get_string("block","theme_remui")),a('.widget-user-2 .btn-block[data-action="unblock"]').css("font-weight","Bold"),a('.widget-user-2 .btn-block[data-action="unblock"]').attr("data-action","block")):"remove"===c?(a('.widget-user-2 .btn-block[data-action="remove"]').removeClass("btn-warning"),a('.widget-user-2 .btn-block[data-action="remove"]').addClass("btn-primary"),a('.widget-user-2 .btn-block[data-action="remove"]').text(M.util.get_string("addtocontacts","theme_remui")),a('.widget-user-2 .btn-block[data-action="remove"]').css("font-weight","Bold"),a('.widget-user-2 .btn-block[data-action="remove"]').attr("data-action","add")):"block"===c?(a('.widget-user-2 .btn-block[data-action="block"]').removeClass("btn-danger"),a('.widget-user-2 .btn-block[data-action="block"]').addClass("btn-success"),a('.widget-user-2 .btn-block[data-action="block"]').text(M.util.get_string("removeblock","theme_remui")),a('.widget-user-2 .btn-block[data-action="block"]').css("font-weight","Bold"),a('.widget-user-2 .btn-block[data-action="block"]').attr("data-action","unblock"),a('.widget-user-2 .btn-block[data-action="remove"]').removeClass("btn-warning"),a('.widget-user-2 .btn-block[data-action="remove"]').addClass("btn-primary"),a('.widget-user-2 .btn-block[data-action="remove"]').text(M.util.get_string("addtocontacts","theme_remui")),a('.widget-user-2 .btn-block[data-action="remove"]').css("font-weight","Bold"),a('.widget-user-2 .btn-block[data-action="remove"]').attr("data-action","add")):"unblock"===c&&(a('.widget-user-2 .btn-block[data-action="unblock"]').removeClass("btn-success"),a('.widget-user-2 .btn-block[data-action="unblock"]').addClass("btn-danger"),a('.widget-user-2 .btn-block[data-action="unblock"]').text(M.util.get_string("block","theme_remui")),a('.widget-user-2 .btn-block[data-action="unblock"]').css("font-weight","Bold"),a('.widget-user-2 .btn-block[data-action="unblock"]').attr("data-action","block"),a('.widget-user-2 .btn-block[data-action="add"]').removeClass("btn-primary"),a('.widget-user-2 .btn-block[data-action="add"]').addClass("btn-warning"),a('.widget-user-2 .btn-block[data-action="add"]').text(M.util.get_string("removefromcontacts","theme_remui")),a('.widget-user-2 .btn-block[data-action="add"]').css("font-weight","Bold"),a('.widget-user-2 .btn-block[data-action="add"]').attr("data-action","remove")):(a(".widget-user-2 #add-contacts-error").show(),a(".widget-user-2 #add-contacts-error").html('<center><i class="icon fa fa-warning"></i>'+M.util.get_string("actioncouldnotbeperformed","theme_remui")))}})}),a("#page-user-profile .form-horizontal #btn-save-changes").click(function(){var b=a("#inputfName").val(),c=a("#inputlName").val(),d=a("#inputEmail").val(),e=a("textarea#inputDescription").val(),f=a("#inputCity").val(),g=a("#page-user-profile .form-horizontal #select-country option:selected").val(),h=a("#page-user-profile .form-horizontal #select-country option:selected").text();if(""===b)return a("div#error-message").show(),a("div#error-message").removeClass("alert-success").addClass("alert-danger"),a("div#error-message").html(M.util.get_string("enterfirstname","theme_remui")),a("#inputfName").focus(),!1;if(""===c)return a("div#error-message").show(),a("div#error-message").removeClass("alert-success").addClass("alert-danger"),a("div#error-message").html(M.util.get_string("enterlastname","theme_remui")),a("#inputlName").focus(),!1;if(""===d)return a("div#error-message").show(),a("div#error-message").removeClass("alert-success").addClass("alert-danger"),a("div#error-message").html(M.util.get_string("enteremailid","theme_remui")),a("#inputEmail").focus(),!1;var i=/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-Z0-9]{2,4}$/;return i.test(d)?(d=encodeURIComponent(d),g===M.util.get_string("selectcountry","theme_remui")&&(h="",g=""),void a.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/remui/rest.php?action=save_user_profile_settings&fname="+b+"&lname="+c+"&emailid="+d+"&description="+e+"&city="+f+"&country="+g,success:function(){if(a("div#error-message").show(),a("div#error-message").removeClass("alert-danger").addClass("alert-success").html(M.util.get_string("detailssavedsuccessfully","theme_remui")),a(".main-header .user-menu a span").text(b+" "+c),a("section.content-header h1").text(b+" "+c),a("section.content h3.widget-user-username").text(b+" "+c),a(".main-header .user-menu .dropdown-menu .user-header p").text(b+" "+c),f){var d;a("div#user-location").html('<hr><strong><i class="fa fa-map-marker margin-r-5"></i>'+M.util.get_string("location","theme_remui")+"</strong>"),d=f,h&&(d=f+", "+h),a("div#user-location").append('<p class="text-muted">'+d+"</p>")}else h?(a("div#user-location").html('<hr><strong><i class="fa fa-map-marker margin-r-5"></i>'+M.util.get_string("location","theme_remui")+"</strong>"),a("div#user-location").append('<p class="text-muted">'+h+"</p>")):a("div#user-location").empty();e?(a("div#user-description").html('<hr><strong><i class="fa fa-file-text-o margin-r-5"></i>'+M.util.get_string("description","theme_remui")+"</strong>"),a("div#user-description").append("<p>"+e+"</p>")):a("div#user-description").empty()},error:function(a,b,c){alert(b),alert(c)}})):(a("div#error-message").show(),a("div#error-message").removeClass("alert-success").addClass("alert-danger"),a("div#error-message").html(M.util.get_string("enterproperemailid","theme_remui")),a("#inputEmail").focus(),!1)})}}});